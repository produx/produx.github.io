<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="mobile-web-app-capable" content="yes">

		<!-- style sheets -->
		<link rel="stylesheet" type="text/css" href="../common.css">

		<style type="text/css">

		#wrapper-query {background-color:#eae8e0; min-height:80px;}
		#wrapper-results {max-width:1160px; margin:0 auto; padding:0 16px 0; box-sizing:border-box;}
		#wrapper-results #filters {width:225px; float:left; background-color:#f5f4f0; height:400px;}
		#wrapper-results #list {width:calc(100% - 245px); float:right;  height:400px;}
		#wrapper-results #sort {padding:16px 0; border-bottom:solid 1px #ccc;}
		#wrapper-results #list #hotels .hotel {margin-top:16px; border:solid 1px #eee; padding:8px; border-radius:4px;}
		#wrapper-results #list #hotels .hotel .details {display: inline-block; vertical-align: top; margin-left:8px;}
		#wrapper-results #list #hotels .hotel .address {font-size:12px; display: block; margin-top:4px;}
		#wrapper-results #list #hotels .hotel .neighbourhood {font-size:12px; display: block; margin-top:4px;}
		#wrapper-results #list #hotels .hotel .thumbnail {height:80px; width:120px; overflow:hidden; display:inline-block; vertical-align: top; position:relative;}
		
		#wrapper-results #list #hotels .hotel .thumbnail img {width:100%; position:absolute; bottom:0;}

		#location-list {position:absolute; top:0; bottom:0px; left:0px; right:0px; width:200px;  background-color:#fff; border-right:8px #fff solid; overflow-y: scroll; box-sizing: border-box; padding:8px; background-color:#eee;}

		#neighbourhoods {position:absolute; top:0px; bottom:0; left:200px; right:auto; width:300px; padding:8px 8px 0; background-color:#fff; border-right:solid 8px #fff;}
		#neighbourhoods .card {position:absolute; bottom:0; left:0px; right:0; top:0px; overflow-y:scroll; padding:0 0px 0 0px;}
		#neighbourhoods .card:first-child {display:none;}
		#neighbourhoods .card  h2 {font-size:18px; font-weight:bold; position:relative; }
		#neighbourhoods .card img {height:240px;}
		#neighbourhoods .card p {line-height: 18px; padding:0;}
		#neighbourhoods .card button{margin-top:8px; font-size:16px; font-family:arial; background-color: #1db0ed; color:#fff; padding:8px; border:0; border-radius: 4px; width:100%;
    -webkit-box-shadow: 0 4px #0c7daf;
    -moz-box-shadow: 0 4px #0c7daf;
    box-shadow: 0 4px #0c7daf;}
    	.container {margin-bottom:16px; padding:0 8px;}
    	#price {background-color:  #eae8e0; padding:8px 24px 16px ;}
    	.container h3 {font-size:14px; margin:8px 0;}
    	.container ul.tags {margin:0; padding:0;}
    	.container ul.tags li {list-style-type: none; display:inline-block; margin:0; padding:4px 8px; background-color:#eee; border-radius:4px; font-size:12px; text-transform: uppercase;}
		#neighbourhoods .close {position:absolute; right:14px; top:6px; color:#fff;}
		#neighbourhoods .close:hover {}

		select {border:0; font-size:18px; padding:8px 0 4px; border-top:solid 1px #eee; -webkit-appearance: none; background-color:#fff; font-weight:bold; font-family:arial; position:relative; background:url("arrow_down.png") no-repeat right center; background-size: 12px; border-radius:0; width:100%; outline: 0; box-sizing: border-box;}

		select:hover {cursor:pointer;}

		.labels {display:inline-block; background-color: #000; color:#fff; padding:4px 8px; font-size:12px; font-weight: bold;}

		.selector {position:absolute; top:8px; left:8px; right:8px; background-color:transparent; z-index:1000; padding: 0; box-sizing:border-box; }

	#overlay:hover {cursor:pointer;}
		</style>


	</head>

	<body>

	<!-- common elements -->
		<div id="header"></div>
		<div id="nav"></div>
		
		<div id="wrapper-query">
			
		</div>


		<div id="wrapper-results">
			<div id="filters"></div>

			<script id="some-template" type="text/x-handlebars-template">
 				{{#each hotels}}
 					<div class="hotel">
 						<div class="thumbnail">
 							<img src="{{imageUrl}}" />
 						</div>
 						<div class="details">
       	 					<a class="name" href="#">{{hotelName}}</a>
       	 					<span class="address">{{address1}}, {{address2}}, {{locality}}, {{region}}</span>
       	 					<span class="neighbourhood">{{location}}</span>
       	 				</div>
       	 			</div>
		      	{{/each}}
    		</script>


			<div id="list-1"></div>
			
			<div id="list">
				<div id="sort">Sort by</div>

				<div id="guide" style="padding:8px; background-color:#1db0ed; margin-top:8px; color:#fff;">Not sure which part of Tokyo is right for you? <a href="#" style="color:#fff; font-weight:bold">Explore our guide to Tokyo neighbourhoods</a></div>


				<div id="hotels">
					
				<div id="loading-hotels" style="font-size:20px; margin-top:40px; text-align:center; display:none;">fetching hotels...</div>

				</div>	
			</div>
		</div>
		
<div id="overlay" style="position:fixed; top:0; left:0; right:0; bottom:0; background-color:#000; opacity:0.7;"></div>

<div id="map" style="position:fixed; top:50px; left:50px; right:50px; bottom:50px; border:solid 8px #fff; border-radius:4px">

			<div id="map_canvas" style="width:100%; height:100%;"></div>
<style type="text/css">
						.price {display:flex; flex-direction: row;}
						.price > div {flex-grow:1}
						.price span {font-size:24px;}

						.location {overflow: hidden; margin-bottom:8px; position:relative;}
						.location img {width:100%;}
						.location h2 {background-color:#000; padding:8px; margin:0; font-size:16px; position:absolute; bottom:0; left:0; right:0; opacity:0.8; color:#fff;}

						.location:hover {cursor: pointer;}
						.location:hover h2 {background-color:#1db0ed;}

						.selected h2 {background-color:#1db0ed;}
					</style>
			<div id="location-list">
				<div class="location selected" rel="Akasaka">
					<img src="https://a1.cdn-hotels.com/cos/production166/d148/22b478f0-05c0-11e4-b02d-d89d672bfba8.jpg" />
					<h2>Akasaka</h2>
				</div>
				<div class="location" rel="Asakusa">
					<img src="https://a1.cdn-hotels.com/cos/production187/d78/23269bb0-05c0-11e4-b376-d89d672c79ac.jpg" />
					<h2>Asakusa</h2>
				</div>
				<div class="location" rel="Ginza">
					<img src="https://a1.cdn-hotels.com/cos/production20/d709/23822930-05c0-11e4-b376-d89d672c79ac.jpg" />
					<h2>Ginza</h2>
				</div>
				<div class="location" rel="Nihonbashi">
					<img src="https://a1.cdn-hotels.com/cos/production110/d1096/23ede350-05c0-11e4-8314-d89d672bd508.jpg" />
					<h2>Nihonbashi</h2>
				</div>
				<div class="location" rel="Shinjuku">
					<img src="https://a1.cdn-hotels.com/cos/production41/d382/244f1620-05c0-11e4-8314-d89d672bd508.jpg" />
					<h2>Shinjuku</h2>
				</div>
			</div>
			
			<div id="neighbourhoods">
				<div class="selector">
					
					
				</div>
				<div id="Akasaka" class="card">
				
					


					
					<div class="container" id="price">
						<h2>Akasaka</h2>
						<h3>Hotel prices</h3>
						<div class="price">
							<div>3 stars from <br><span>$123</span></div>
							<div>4 stars from <br><span>$189</span></div>
							<div>5 stars from <br><span>$321</span></div>

						</div>
						<button>View hotels in Akasaka</button>
					</div>

					<div class="container">
						<h3>Great for</h3>
						<ul class="tags">
							<li>Shopping</li>
							<li>Food</li>
							<li>Nightlife</li>
						</ul>
					</div>



					
					<div class="container">
					
						<p class="description">
							It's one of the commercial centers of Tokyo, which explains why Akasaka boasts a lion's share of swanky, upmarket hotels – many of which count as attractions in their own right. Chill out in their cocktail and Champagne bars, not to mention the wealth of restaurants serving everything from exquisite tempura dishes to traditional Japanese barbecue, or yakiniku. Prices can be high, but you can bag great deals at lunchtime.

						</p>
					</div>
					

					
					
				</div>

				<div id="Asakusa" class="card" style="display:none;">
					
					<div class="container"  id="price">
					<h2>Asakusa</h2>
						<h3>Hotel prices</h3>
						<div class="price">
							<div>3 stars from <br><span>$123</span></div>
							<div>4 stars from <br><span>$189</span></div>
							<div>5 stars from <br><span>$321</span></div>

						</div>
						<button>View hotels in Asakusa</button>
					</div>

					<div class="container">
						<h3>Great for</h3>
						<ul class="tags">
							<li>Shopping</li>
							<li>Food</li>
							<li>Nightlife</li>
						</ul>
					</div>

					
					<div class="container" >
					<p class="description">
						There's one major reason why Asakusa should be on your Tokyo to-do list: the ancient Buddhist temple Senso-Ji, which is the largest in the city and dates right back to 645 AD. Entering through the iconic Thunder Gate, you'll be dazzled by the Nakamise arcade, with its colorful stalls selling everything from kimonos to decorative fans. You can also admire Senso-Ji's ornate pagoda and the nearby Asakusa Shrine.

					</p>
					</div>
					
				</div>

				<div id="Ginza" class="card" style="display:none;">
				
					<div class="container"  id="price">
					<h2>Ginza</h2>
						<h3>Hotel prices</h3>
						<div class="price">
							<div>3 stars from <br><span>$123</span></div>
							<div>4 stars from <br><span>$189</span></div>
							<div>5 stars from <br><span>$321</span></div>

						</div>
						<button>View hotels in Ginza</button>
					</div>

					<div class="container">
						<h3>Great for</h3>
						<ul class="tags">
							<li>Shopping</li>
							<li>Food</li>
							<li>Nightlife</li>
						</ul>
					</div>

					<div class="container" >
					<p class="description">
						Fashionistas flock to this part of Tokyo, and with good reason. It's the place to find high-end department stores as well as boutiques emblazoned with the names of the world's best-known fashion houses. Ginza's not just about splashing the cash, though. Iconic structures can also be seen first hand, from the clocktower on the Wako Building to the towering, neon-lit glass cylinder of the San'ai Building.

					</p>
				</div>
					
					
				</div>

				<div id="Nihonbashi" class="card" style="display:none;">
				
					<div class="container"  id="price">
					<h2>Nihonbashi</h2>
						<h3>Hotel prices</h3>
						<div class="price">
							<div>3 stars from <br><span>$123</span></div>
							<div>4 stars from <br><span>$189</span></div>
							<div>5 stars from <br><span>$321</span></div>

						</div>
						<button>View hotels in Nihonbashi</button>
					</div>

					<div class="container">
						<h3>Great for</h3>
						<ul class="tags">
							<li>Shopping</li>
							<li>Food</li>
							<li>Nightlife</li>
						</ul>
					</div>
					<div class="container" >
					<p class="description">
						Taking its name from the Nihonbashi Bridge (stone now, but the original wooden one was built back in 1603), this is one of Tokyo's business hotspots. And you'll be able to tell that just from looking up at the magnificent buildings, including the sleek Mitsui Tower. It's also the headquarters of the Tokyo Stock Exchange, though casual travelers will probably be more interested in the district's department stores and restaurants.
					</p>
				</div>
					
					
				</div>

				<div id="Shinjuku" class="card" style="display:none;">
				
					<div class="container" id="price">
					<h2>Shinjuku</h2>
						<h3>Hotel prices</h3>
						<div class="price">
							<div>3 stars from <br><span>$123</span></div>
							<div>4 stars from <br><span>$189</span></div>
							<div>5 stars from <br><span>$321</span></div>

						</div>
						<button>View hotels in Shinjuku</button>
					</div>

					<div class="container">
						<h3>Great for</h3>
						<ul class="tags">
							<li>Shopping</li>
							<li>Food</li>
							<li>Nightlife</li>
						</ul>
					</div>
<div class="container" >
					<p class="description">
						Shinjuku train station is the busiest in the world, which gives you an idea of just how buzzing this district is. It's a place of contrasts – there are the alleys of Golden Gai, whose bars are a haven for artists and musicians, and then there are the whopping skyscrapers of the Nishi-Shinjuku business zone. For serenity amid the urban sprawl, relax amid the cherry blossoms of Shinjuku Gyoen National Garden.

					</p>
</div>
					
					
				</div>
			</div>


		<div>




		<!-- Scripts -->
		<script type="text/javascript"
          src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDGbEUwknHTaKmEpjwM-fRfJt7zbCZZtCI">
      	</script>
      	<script src="map-labels.js"></script>
      	<script src="map_3.js"></script>

		<script src="../hcom-services.js"></script>
		<script src="../handlebars.js"></script>

		<!-- JQuery Google CDN -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script type="text/javascript">
			// run things on page load
			$(function(){

				initializeMap("Tokyo");

      			
				if (getParameterByName("destination")) {
					//fetch hotels from mobile API
					fetchHotelList(getParameterByName("destination"), displayHotels);
					$("#loading-hotels").show();
				} else {

				}

				// neighbourhood guides

				$("#guide a").on("click", function(e){
					$("#overlay").show();
					$("#map").show();
					initializeMap("Tokyo");

				});

				$("#overlay").on("click", function(e){
					$("#overlay").hide();
					$("#map").hide();
					//initializeMap("Tokyo");
					
				});

				$("#neighbourhoods .card .close").on("click", function(e){
					e.preventDefault();
					console.log("hit close")
					$("#neighbourhoods").slideUp();
					neighbourhoodPolygon.setVisible(false);
				}); 

				$(".location").on("click", function(e){
					console.log($(this).attr("rel"))
					openNeighbourhood($(this).attr("rel"));
					focusNeighbourhoodPolygon($(this).attr("rel").toLowerCase());
					$(".location").removeClass("selected");
					$(this).addClass("selected");
				})

				$('select').on('change', function() {
  					//console.log( $(this).find('option:selected').text()); // or $(this).val()
  					openNeighbourhood($(this).find('option:selected').val())
  					var nhoodobj = neighbourhoods[$(this).find('option:selected').val().toLowerCase()]
  					//$("#neighbourhoods .card").hide();
					//$("#neighbourhoods #" + $(this).find('option:selected').text()).show();
					console.log(neighbourhoods[$(this).find('option:selected').val().toLowerCase()]);
					focusNeighbourhoodPolygon(nhoodobj.name)
					//addNeighbourhoodPolygon(nhoodobj.center)
				});


			});


			var displayHotels = function (data) {
				// 
				$("#loading-hotels").hide();
				// get hotel data
				var hotels = data.result;
				console.log(hotels);
				
				// attach to handle bar template
        		var source   = $("#some-template").html();
  				var template = Handlebars.compile(source);
  				$("#hotels").html(template(hotels));
			}

			var openNeighbourhood = function(nhood){
				//console.log("neighbourhood"); 
				$("#neighbourhoods .card").hide();
				$("#neighbourhoods #" + nhood).show();
				$("#neighbourhoods").slideDown();

				/*$("select option").filter(function() {
    				//may want to use $.trim in here
    				return $(this).val() == nhood; 
				}).prop('selected', true);*/

			}

		</script>
	</body>
</html>