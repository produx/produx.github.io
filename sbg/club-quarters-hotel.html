<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="mobile-web-app-capable" content="yes">

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
      <link rel="stylesheet" href="pdp.css">

	</head>

	<body>

			<div id="page-wrapper">
				<div id="header"></div>
				<div id="sqm"></div>
				<div id="summary">
					<div class="name">Club Quarters Hotel, Grand Central</div>
					<div class="address">128 East 45th Street, New York, NY, 10017, United States of America</div>
					<div class="cgs">4-star hotel with restaurant, near Chrysler Building</div>
				</div>
				<div id="photo"></div>
				<div id="price">
					
						<div class="total-price"><span class="strikethrough">$600</span> Â£400</div>
						<div sclass="info">for 1 room for 2 nights including taxes & fees</div>
						<div style="font-size: 13px; margin-bottom:4px;">+ $69 charges due at property</div>
					
					<button>Book Now</button>
				</div>
				<div id="amenities-main">
					<div>
						<span>Main amenities</span>
						<ul>
							<li>330 Guestrooms</li>
							<li>Restaurants and 2 bar lounges</li>
							<li>Rooftop terrace</li>
							<li>Breakfast available</li>
							<li>24-hour fitness centre</li>
						</ul>
					</div>
					<div>
						<span>For families</span>
						<ul>
							<li>Babysitting or childcare (surcharge)</li>
							<li>Connecting / adjoining rooms</li>
							<li>Provate bathroom</li>
							<li>Free toiletries</li>
							<li>Daily housekeeping</li>
						</ul>
					</div>
					<div>
						<span>What's around</span>
						<ul>
							<li>In Midtown</li>
							<li>Times Square (1-minute walk)</li>
							<li>Broadway (3-minute walk)</li>
							<li>Macy's (7-minute walk)</li>
							<li>New York Public Library (8-minute walk)</li>
						</ul>
					</div>
				</div>
				<div id="location">
					<div class="map">Map image</div>
				</div>
				<div id="reviews">
					<div class="score">Guest review score</div>
				</div>
				<div id="tools"></div>
				<div id="rewards">
					<div class="title">Hotels.com Rewards</div>
					<div class="info">You'll collect 2 nights with this stay</div>
					<div class="info">Remember collect 10 nights, get 1 reward night free</div>
				</div>
				<div id="rooms-recommended"></div>
				<div id="rooms">
					<div class="name">Club Quarters Hotel, Grand Central</div>
					<div class="sqm-2">Edit dates and occupancy</div>
					<h2>Best value for your group</h2>
					
					<div class="recommended">

						<div class="title">Two room option</div>
						<div class="wrapper">
							<div class="room-option">
								<div class="amount">1x</div>
								<div class="rate-description">
									<a class="room-name" href="#">Superior Room</a>
									<div class="info">Sleeps 2 people</div>
									<div class="info">Non-refundable</div>
									<div class="info">Free wifi</div>
								</div>
								<div class="price">$464</div>
							</div>
							<div class="room-option"">
								<div  class="amount">1x</div>
								<div class="rate-description">
									<a class="room-name" href="#">Deluxe Room</a>
									<div class="info">Sleeps 4 people</div>
									<div class="info">Non-refundable</div>
									<div class="info">Free wifi</div>
								</div>
								<div class="price">$544</div>
							</div>
							<div class="book">
								<div class="occupancy">Price for 6 people</div>
								<div class="total-price">$1008</div>
								<div>
									<button>Book now</button>
								</div>
							
							</div>
						</div>
					</div>

					<h2>Or select the rooms you'd like</h2>
					<div class="room" rel="room1" class="z-index:1000">
						<div class="description">
							<div class="room-name">Superior room</div>
							<div class="sleeps">Sleeps 2 people (including upto 1 child)</div>
							<a href="#">Show details</a>
							<div class="thumb"></div>
						</div>
						<div class="rate">
							<div class="rate-details">
								<div class="non-refundable">Non-refundable</div>
								<div class="wifi">Free Wifi</div>
							</div>
							<div class="rate-options-wrapper">
								<div class="rate-options r1r1" rel="r1r1">
									<div class="label">How many people</div>
									<div class="occupancy">2 adults</div>
									<div class="price">$462</div>
									<div class="arrow">
									 <i class="material-icons">arrow_drop_down</i>
									</div>
								</div>
								<div class="add-button">

									<button class="add" rel="r1r1">Add</button>
								
								</div>
								<div id="r1r1" class="rate-occupancy-list" style="">
									<div><span class="r-occupancy">1 adult</span> <span class="r-price">$462</span></div>
									<div><span class="r-occupancy">2 adults</span> <span class="r-price">$462</span></div>
								</div>
							</div>
							
						</div>

						<div class="rate" class="z-index:999">
							<div class="rate-details">
								<div class="free-cancellation">
									Free cancellation
									<div class="expiry">Until 24/07/2019</div>
								</div>
								<div class="wifi">Free Wifi</div>
							</div>
							<div class="rate-options-wrapper">
								<div class="rate-options r1r2" rel="r1r2">
									<div class="label">How many people</div>
									<div class="occupancy" style="">2 adults</div>
									<div class="price" style="">$614</div>
									<div class="arrow" style="">
									 	<i class="material-icons">arrow_drop_down</i>
									</div>
								</div>
								<div class="add-button">

									<button class="add" rel="r1r2">Add</button>
								
								</div>

								<div id="r1r2" class="rate-occupancy-list" style="z-index:10000">
									<div><span class="r-occupancy">1 adult</span> <span class="r-price">$614</span></div>
									<div><span class="r-occupancy">2 adults</span> <span class="r-price">$614</span></div>
								</div>
							</div>
						</div>
					</div>

					<div class="room" rel="room2" style="margin-top:20px;">
						<div class="description">
							<div class="room-name">Deluxe room</div>
							<div class="sleeps">Sleeps 4 people (including upto 2 child)</div>
							<a href="#">Show details</a>
							<div class="thumb"></div>
						</div>
						<div class="rate">
							<div class="rate-details">
								<div class="non-refundable">Non-refundable</div>
								<div class="wifi">Free Wifi</div>
							</div>
							<div class="rate-options-wrapper">
								<div class="rate-options r2r1" rel="r2r1">
									<div class="label">How many people</div>
									<div class="occupancy">4 adults</div>
									<div class="price">$749</div>
									<div class="arrow">
									 <i class="material-icons">arrow_drop_down</i>
									</div>
								</div>
								<div class="add-button">

									<button class="add" rel="r2r1">Add</button>
								
								</div>
								<div id="r2r1" class="rate-occupancy-list" style="z-index:10001">
									<div><span class="r-occupancy">2 adult</span> <span class="r-price">$570</span></div>
									<div><span class="r-occupancy">3 adults</span> <span class="r-price">$659</span></div>
									<div><span class="r-occupancy">4 adults</span> <span class="r-price">$749</span></div>
								</div>
							</div>
							
						</div>
						<div class="rate" class="z-index:999">
							<div class="rate-details">
								<div class="free-cancellation">
									Free cancellation
									<div class="expiry">Until 24/07/2019</div>
								</div>
								<div class="wifi">Free Wifi</div>
							</div>
							<div class="rate-options-wrapper">
								<div class="rate-options r2r2" rel="r2r2">
									<div class="label">How many people</div>
									<div class="occupancy">4 adults</div>
									<div class="price">$937</div>
									<div class="arrow">
									 	<i class="material-icons">arrow_drop_down</i>
									</div>
								</div>
								<div class="add-button">

									<button class="add" rel="r2r2">Add</button>
								</div>

								<div id="r2r2" class="rate-occupancy-list" style="z-index:10000">
									<div><span class="r-occupancy">2 adult</span> <span class="r-price">$758</span></div>
									<div><span class="r-occupancy">3 adults</span> <span class="r-price">$847</span></div>
									<div><span class="r-occupancy">4 adults</span> <span class="r-price">$937</span></div>
								</div>
							</div>
						</div>
					</div>

				</div>
				<div id="whats-around"></div>
				<div id="amenities-all"></div>
			</div>

<div id="basket">
	<div class="rooms-selected" >
	</div>
	<div class="in-basket">
		<div class="total-price"></div>
		<div class="book-rooms">
			<button >Book now</button>
		</div>
	</div>
</div>

<div id="basket-modal">
	<h2>Full list of rooms selected will appear in here</h2>
	<br /><br /><br /><br />
	<a href="#" class="close">Close window</a>
</div>

		<!-- Scripts -->
		<!-- JQuery Google CDN -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

		<script type="text/javascript">
			var numrooms = 0;
			var selectedRate = "";
			var totalPrice = 0;
			// run things on page load
			$(function(){
				$(document).click(function(){
    				$(".rate-occupancy-list").hide();
				});

			 	$(".rate-occupancy-list").click(function(e){
    				e.stopPropagation();
				});

				$(".rate-options").on("click", function(e){
					e.preventDefault();
					e.stopPropagation();
					selectedRate = $(this).attr("rel");
					$("#"+selectedRate).show();
				}); 

				$(".rate-occupancy-list > div").on("click", function(e){
					console.log($(this).find(".r-price").text() + " - " + $(this).find(".r-occupancy").text());
					$(".rate-options-wrapper ." + selectedRate + " .price").text($(this).find(".r-price").text());
					$(".rate-options-wrapper ." + selectedRate + " .occupancy").text($(this).find(".r-occupancy").text());
					$("#" + selectedRate).hide();
				});

				$("button.add").on("click", function(e){
					$("#basket").slideDown();
					numrooms = numrooms + 1;
					//$("#basket .num-rooms").text(numrooms.toString());
					var rateId = $(this).attr("rel");
					
					// get room + rate details
					var price = $(".rate-options-wrapper ." + rateId + " .price").text().substring(1); 
					var roomName = $(this).closest(".room").find(".description .room-name").text(); 
					var occupancy = $(".rate-options-wrapper ." + rateId + " .occupancy").text();
					
					console.log(roomName);

					console.log(roomName + " - " + occupancy + " - $" + price);

					//var p = price.substring(1); 
					totalPrice = totalPrice + parseInt(price); 

					var selectedRateDetails = '<div class="rate-selected">1 x <span class="room">'+ roomName +'</span> - <span class="occupancy">' + occupancy + '</span> <span class="price">' + price +'</span> <a href="#" class="remove">x</a></div>';

					$(".rooms-selected").append(selectedRateDetails);
					
					$("#basket .total-price").text("$"+totalPrice.toString());
					var roomAdded = $(this).closest(".room").attr("rel")
					var getNumRoomsAdded = $(".rooms-selected #" + roomAdded + " .number").text();
					
					var totalRoomsAdded = parseInt(getNumRoomsAdded) + 1; 
					$(".rooms-selected #" + roomAdded + " .number").text(totalRoomsAdded.toString());
					$(".rooms-selected #" + roomAdded).show();

				})

			 	$("#basket a.edit").on("click", function(e){
			 		e.preventDefault(); 
			 		$("#basket-modal").show();
			 	}); 

			 	$("#basket-modal a.close").on("click", function(e){
			 		e.preventDefault();
			 		$("#basket-modal").hide();
			 	}); 

			 	$(".rooms-selected").on("click", "a.remove", function(e){
			 		e.preventDefault();
			 		var price = $(this).closest(".rate-selected").find(".price").text();
			 		
			 		totalPrice = totalPrice - parseInt(price);
			 		console.log(totalPrice);

			 		if (totalPrice == 0){
			 			$("#basket").slideUp();
			 			$(this).closest(".rate-selected").remove();
			 		} else {
			 			$(this).closest(".rate-selected").fadeOut();
			 		}
			 		
			 		$("#basket .total-price").text("$"+totalPrice.toString());
			 	})

			});

		</script>
	</body>
</html>