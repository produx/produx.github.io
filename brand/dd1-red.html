<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="mobile-web-app-capable" content="yes">

		<script src="https://use.typekit.net/plt6aug.js"></script>
		<script>try{Typekit.load({ async: true });}catch(e){console.log(e)}</script>

		<!-- style sheets -->

		<link rel="stylesheet" type="text/css">
		<style type="text/css">
				body {padding:0; margin:0; font-family: "-apple-system", BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, Cantarell, “Fira Sans”, “Droid Sans”, “Helvetica Neue”, Arial, sans-serif; background-color:#fff; color:#1B1D1C;}
				
				#header {background-color: #d32f2f; }	
		#header-content {padding:8px 8px; background-color:;}	
		#header-content h1 {margin:0; padding:0; float:left;}
		#header-content .phone {padding:8px 0; float:left;}
		#header-content .link {font-size:13px;}

div {box-sizing:border-box;}
ul {list-style-type: none; padding:0; margin:0;}
a {color:#1976D2; text-decoration: none;}

.tools {padding:0px 0px 0px; display:flex; flex-direction: row; margin:0px 0 0px; background-color:#fff;}
		.tools li {flex-grow:1; }
		.tools li {display:block; font-size:13px; color:#1976D2; border-top:solid 1px #ddd; border-bottom:solid 1px #ddd; padding:4px 8px; border-radius:0px; background-color:#fff;}

		#page-wrapper {background-color:#f5f5f5;}

		@media screen and (min-width: 420px) {
    		#page-wrapper {
        		max-width:360px;
        		margin:0 auto;
        		
        		border-left:1px solid #ddd;
        		border-right:1px solid #ddd;
    		}
		}

		</style>

	</head>

	<body>

	<div id="page-wrapper">
		

	

		<div id="header-wrapper">
			<div id="header">

		<div id="header-content">
				
			
			
				<div style="height:30px; overflow:hidden; color:#fff; font-size:20px; width:100%">
					<div style="position:relative; height:30px; overflow:hidden; width:200px; float:left;">
						<img src="i/hcom_logo_white.svg" style="height:50px; position:absolute; top:-10px; left:-64px"/>
					</div>
					<div style="float:right">
						<i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<i class="fa fa-user" aria-hidden="true"></i>
					</div> 
				</div>
				
				
			
			
		</div>
	</div>

		</div>


		

		<div style="background-color:#D1E9E3; background-color:#fff; padding:8px 8px 0px;">
			<div style="border-radius:2px; min-height:20px; background-color:#fff; border:solid 1px #ccc; font-size:13px; position:relative; margin:0px 0px 0px; color:#555; padding:8px;">
					<div style=" font-size:14px; color:#1976D2;">London, United Kingdom</div>
					<div style="padding:4px 0 0 0; font-size:12px;">Fri 24 - Sat 25 June 2016, 1 room 2 adults</div>
					<div style="position:absolute; right:2px; top:2px; bottom:2px; background-color:#1976D2; color:#fff;  padding:6px 8px 0; border-radius:0px; text-align:center; box-sha/dow: inset 0 -2px 0 #003789; border-left:solid 0px #026dc5">
						<i class="fa fa-search" aria-hidden="true" style="font-size:16px;"></i> 
						<span style="display:block; font-size:10px; text-align:center; margin-top:4px">EDIT</span>
					</div>
				</div>
		</div>
		<div style="background-color:#D1E9E3; background-color:#fff; min-height:40px; padding:16px 16px 8px; color:#7B1FA2; position:relative; box-sizing:border-box; margin:0px 0px 0px;">
			<p style="padding:0; margin:0 0 0 40px; font-size:14px; line-height:18px">Collect nights with this stay and look out for <strong>Your Secret Price</strong> on selected hotels</p>
			<div style="position:absolute; top:12px; left:12px; bottom:12px; background-color:#7B1FA2; border-radius:2px; box-sizing:border-box; padding:6px 6px 0 7px;"><img src="i/MOON_[white].svg" style="height:20px;" /></div>
		</div>
				


		<ul class="tools" style="padding-top:8px; background-color:#fff">
			<li style=""><label style="font-size:11px; font-weight:normal; display:block; padding-bottom:2px;">Open</label>Filters</li>
			<li style=""><label style="font-size:11px; font-weight:normal; display:block; padding-bottom:2px;">View on</label>Map</li>
			<li style="position:relative; background-color:#fff;  font-weight:bold; padding:4px 4px; border-radius:2px;  flex-grow:1;">
				
				<label style="font-size:11px; font-weight:normal; display:block; padding:0 4px; color:#555">Sort by:</label>
				<select style="font-size:13px; font-family:arial; padding:0; color:#000; background: transparent; border:none; width:100%; outline:none;">
					<option>Our favourites</option>
					<option>Stars (high to low)</option>
					<option>Stars (low to high)</option>
					<option>Distance to city center</option>
					<option>Guest rating</option>
					<option>Price (high to low)</option>
					<option>Price (low to high)</option>
				</select>
				
			</li>
			
		</ul>

		<div id="compression" style="background-color:#F9DC5C; margin:8px 8px 8px; font-size:16px; padding:12px 12px 12px">43% booked for your travel dates. Don’t wait until it’s too late, book now.</div>
		
		
		<div id="hotel-list"></div>

		<script id="hotel-card-template" type="text/x-handlebars-template">
 			{{#each hotels}}
 				<div class="hotel-card">
 					<div class="thumbnail">
 						<img src="{{thumbnailUrl imageUrl}}" />
 					</div>
 					<div class="details">
 						<div class="name"><a href="#">{{hotelName}}</a></div>
 						<div class="neighbourhood">{{neighbourhood location}}</div>
 						<div class="proximity-base">{{distanceFromBaseLandmark}} to city center</div>
 					</div>
 					<div class="rating">
 						<div class="guestRating">
 							<span class="qual">{{qualitativeBadgeText}}</span> 
 							<span class="score">{{guestReviewRating}}</span> / 5 
 							<span class="numReviews">{{numberOfGuestReviews}} reviews</span>
 						</div>
       	 				<div class="taGuestReview">
       	 					<img class="owl" src="i/ta-owl.png" /><img class="circles" src="i/ta-circles.png" /> 
       	 					<span class="numReviews">100 reviews</span>
       	 				</div>
 					</div>
 					<div class="price">
 						{{#if promoPriceDetails}}
									{{#if promoPriceDescription.length}}
       	 								{{showDeal promoPriceDetails @index avgPrice promoPriceDescription}}
       	 							{{else}}
       	 								<div class="standard">{{promoPriceDetails.prefix}}{{promoPriceDetails.formattedValue}}</div>
       	 							{{/if}}
       	 				
       	 						{{else}}
       	 							<div class="standard">{{avgPrice}}</div>
       	 						{{/if}}
       	 						<span class="summary">price for 1 night including taxes and fees</span>
 					</div>
 				</div>
 			{{/each}}
    	</script>	

    	</div>

    	<style type="text/css">
    		#hotel-list {background-color:#f5f5f5;}
    		.hotel-card {background-color: #fff; min-height:120px; margin-bottom:4px; border-bottom: solid 1px #e5e3db; border-top: solid 1px #e5e3db; position:relative;}
    		.hotel-card .thumbnail {position:absolute; top:8px; left:8px; bottom:8px; width:30%; text-align: center; overflow: hidden;}
			.hotel-card .thumbnail img { position: relative; left: 100%; margin-left: -200%; height:100%;}
			.hotel-card .details, .hotel-card .price, .hotel-card .rating {margin-left:30%; box-sizing:border-box; padding-left:16px;}
			.hotel-card .details {margin-top:8px;}
			.hotel-card .name {font-size:14px; line-height: 18px;}
			.hotel-card .neighbourhood {font-size:12px; line-height: 16px}
			.hotel-card .proximity-base {font-size:12px; line-height: 16px}

			.hotel-card .rating {margin-top:8px;}
			.hotel-card .rating .guestRating {font-size: 14px; line-height: 16px; font-weight:bold;}
			.hotel-card .rating .guestRating .numReviews {font-size: 11px; line-height: 13px; color:#999; font-weight: normal; display:inline-block; vertical-align: bottom; margin-left:4px;}
			.hotel-card .rating .taGuestReview {}
			.hotel-card .rating .taGuestReview .owl {height:13px; display:inline-block;}
			.hotel-card .rating .taGuestReview .numReviews {font-size:11px; line-height: 15px; color:#999; display:inline-block;}

			.hotel-card .price {text-align:right; margin-top:8px; padding:0 12px 4px 0;}
			.promo-price-description {display:inline-block; font-size:12px; line-height:16px; font-weight:bold; color:#EC3824;}
			.strikethrough {font-size: 14px; text-decoration: line-through;}
			.total {font-size:20px; color:#d32f2f;}
			.summary {font-size:11px; color:#999;}
			.standard {font-size:20px; }

			.special-deal .label {color:#fff; background-color:#d32f2f; display: inline-block; padding:4px 8px; font-size: 12px; margin-left:4px;}
			.secret-price .label {color:#fff; background-color:#7B1FA2; display: inline-block; padding:4px 12px; font-size: 12px;}
			.secret-price .total {color:#7B1FA2;}
    	</style>

		<!-- Scripts -->
		<!-- JQuery Google CDN -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://use.fontawesome.com/37c289f6f2.js"></script>
		<script src="handlebars.js"></script>

		<script type="text/javascript">

			// run things on page load
			$(function(){
      			
				//$( "#header-wrapper" ).load( "../components/c-header-n/ew.html" );
				$.getJSON( "ny-json.js", function(data){
					console.log(data);
					displayHotels(data);
				});
			});

			var displayHotels = function(data){
				// get hotel data
				var hotels = data.result;
				console.log(hotels);
				
				// attach to handle bar template
        		var source   = $("#hotel-card-template").html();
  				var template = Handlebars.compile(source);
  				$("#hotel-list").html(template(hotels));
			}

			Handlebars.registerHelper("thumbnailUrl", function(imageUrl){
				var url = imageUrl.replace("_b.jpg", "_l.jpg");
				return url;
			});

			Handlebars.registerHelper("neighbourhood", function(location){
				var res = location.split("/");
				//var url = imageUrl.replace("_b.jpg", "_l.jpg");
				return res[0];
			});

			Handlebars.registerHelper("showDeal", function(pricepromotion, index, avgPrice, promoPriceDescription){
				//var res = location.split("/");
				//var url = imageUrl.replace("_b.jpg", "_l.jpg");
				console.log(pricepromotion);
				var dealType = ""

				if (index == 2 || index == 6 || index == 10) {
					dealType = '<div class="secret-price">'
					+ '<div style="text-align:right; margin-bottom:4px; margin-right:-12px"><div class="label">Secret Price</div></div>'
					+ '<span class="strikethrough">' + avgPrice + '</span> '
					+ '<span class="total">' + pricepromotion.prefix + '' + pricepromotion.formattedValue + '</span>'
					+ '</div>'
				} else {
					dealType = '<div class="special-deal">'
					+ '<div style="text-align:right; margin-bottom:4px; margin-right:-12px"><span class="promo-price-description">' + promoPriceDescription + '</span>' + '<div class="label">Special deal</div></div>'
					+ '<span class="strikethrough">' + avgPrice + '</span> '
					+ '<span class="total">' + pricepromotion.prefix + '' + pricepromotion.formattedValue + '</span>'
					+ '</div>'

				}

				return new Handlebars.SafeString(
    				dealType
  				);
			});

		</script>
	</body>
</html>