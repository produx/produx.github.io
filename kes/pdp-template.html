<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="mobile-web-app-capable" content="yes">
		<!-- scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<!-- style sheets -->
		<link rel="stylesheet" href="base.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		<style media="screen">

			img {

			}

			.wrapper {max-width:1200px; margin:0 auto; padding:0 16px; box-sizing:border-box; }
			ul {list-style-type: none; padding:0; margin:0;}
			button {margin-top:16px; background-color: #156BC1; color:#fff; text-transform: uppercase; font-weight: bold; padding:16px; font-size: 16px; border-radius:50vh; border:solid 0px; }



			#header {}
			#header .wrapper ul {overflow:hidden; list-style-type: none;margin:0; padding:0;}
			#header .wrapper ul li {float:left; position:relative;  font-size:16px; margin-left:28px; padding:6px 0 8px 0;}
			#header .wrapper ul li a {display:block; padding:0 20px 0 0;}
			#header .wrapper ul li a i {position:absolute; top:6px; right:0; font-size:20px;}

			#nav {border-bottom:solid 1px #E6E6E6;}
			#nav .wrapper {padding:0px 16px;}
			#nav .wrapper ul {overflow:hidden; list-style-type: none;margin:0; padding:0;}
			#nav .wrapper ul li {float:left;  font-size:14px; margin-right:20px; padding:0px 0 16px;}
			#nav a{color:#525252}

			#sqm {}

			#sqm .wrapper {padding:0px 16px 0;}
			#sqm .wrapper .inner {overflow:hidden; border-bottom:solid 1px #E6E6E6; padding-bottom:16px;}
			#sqm h1 {padding:0; margin:0; font-size: 28px;}
			#sqm label {font-weight:bold; display: block; margin: 0 0 4px 0}
			#sqm input[type=text]{background-color:#F6F4F3; width:100%; box-sizing: border-box; border:solid #E6E6E6 0px; font-size: 16px;}
			#sqm .field {box-sizing: border-box; margin-right:16px;}
			#sqm .field-destination {float:left; width:calc(100% - 790px); position:relative; background-color:#F6F4F3; border: solid 1px #E6E6E6; padding:8px; font-size:14px; color:#156BC1; border-radius:8px; margin-top:16px; box-sizing: border-box; padding-left: 48px;}
 			#sqm .field-dates {float:left; width: 360px; position:relative; float:left; background-color:#F6F4F3; border: solid 1px #E6E6E6; padding:0px 0; font-size:14px; color:#156BC1; border-radius:8px; margin-top:16px; box-sizing: border-box; overflow:hidden;}
			#sqm .field-dates > div {float:left; width:50%; box-sizing: border-box; position:relative; padding: 8px 0 8px 48px;}
			#sqm .field-occupancy {float:left; width:240px; position:relative; background-color:#F6F4F3; border: solid 1px #E6E6E6; padding:8px; font-size:14px; color:#156BC1; border-radius:8px; margin-top:16px; box-sizing: border-box; padding-left: 48px; display:inline-block;}
			#sqm button {float:left; width:140px; margin-top:16px; background-color: #156BC1; color:#fff; text-transform: uppercase; font-weight: bold; padding:16px; font-size: 16px; border-radius:50vh; border:solid 0px; }




			.pdp-body {margin-top:20px;}

			.sticky {
	position: fixed;
	top: 0;
	width: 100%;
}

.sticky + .pdp-body {
	padding-top: 400px;
}

			/* Property description */
			h1 {margin:0 0 4px 0; padding:0; font-size: 28px;}
			.address {font-size:14px;}
			.tagline {margin-top:12px; font-size:16px;}
			ul.freebies li {margin:8px 16px 8px 0;}
			.current-price {font-size:28px; font-weight: bold;}

			.block {background-color:#e6e6e6; padding:16px;}

			/*html {
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    filter: grayscale(100%);
}*/
		</style>
  </head>
  <body>

		<div id="header">
			<div class="wrapper" style="padding:8px 16px; position:relative;">
				<div class="" style="">
					<img src="i/logo-single.png" alt="" style="height:40px;">
				</div>
				<div class="tools" style="position:absolute; top:12px; right:16px;">
					<ul>

						<li style="background:url('i/icon-account.png') no-repeat; background-size:30px; padding-left:36px;"><a href="#" class="primary-red">Craig <i class="material-icons">keyboard_arrow_down
</i></a></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="nav">
			<div class="wrapper">
				<ul class="nav-items">
					<li><a href="#">Deals</a></li>
					<li><a href="#">Things to do</a></li>
					<li><a href="#">Package &amp; Flights</a></li>
					<li><a href="#">Groups &amp; Meetings</a></li>
					<li><a href="#">Gift Cards</a></li>
					<li><a href="#">List your property</a></li>
					<li><a href="#">Hotels.com Rewards</a></li>
				</ul>
			</div>
		</div>

		<div id="sqm">
			<div class="wrapper">
				<div class="inner">


					<div class="field field-destination">
						<i class="material-icons" style="position:absolute; top:14px; left:16px;">search</i>
						<label for="">Destination</label>
						<input id="sqm-destination" type="text" name="" value="" placeholder="Enter your destination">
					</div>
					<div class="field field-dates">
						<div style="border-right: solid 1px #E6E6E6;">
							<i class="material-icons" style="position:absolute; top:14px; left:16px; font-size:20px">calendar_today</i>
							<label for="">Check in</label>
							<input type="text" name="" value="" placeholder="--">
						</div>
						<div>
							<i class="material-icons" style="position:absolute; top:14px; left:16px; font-size:20px">calendar_today</i>
							<label for="">Check out</label>
							<input type="text" name="" value="" placeholder="--">
						</div>

					</div>
					<div class="field field-occupancy">
						<i class="material-icons" style="position:absolute; top:14px; left:16px; font-size:20px">people_alt</i>
						<label for="">Guests</label>
						<input type="text" name="" value="" placeholder="--">
					</div>
					<button type="button" name="button">Search</button>
				</div>
			</div>
		</div>

		<style type="text/css">
			#jump-to {z-index:10000; background-color:#fff; }
			.jump-to-border {border-bottom:solid 1px #e6e6e6; overflow:hidden;}
			#jump-to ul {}

			#jump-to ul li {float:left; padding:16px 0; margin-right:24px;}

			#jump-to ul li.selected {color:#D32F2F; border-bottom: solid 1px #D32F2F;}
			#jump-to ul li.price {float:right; display:none; padding:0; margin-right:0; padding-top: 6px;}
			#jump-to ul li.price .lowest-price {display:inline-block; vertical-align: middle; font-weight: bold;}
			#jump-to ul li.price button {font-size:12px; margin:0px 0 0 0; padding:12px 20px; display:inline-block; vertical-align: middle;}
			#jump-to ul li[rel='link']:hover{cursor: pointer; color:#D32F2F}
			.extra-height{padding-top:56px;}
		</style>
		<div id="jump-to">
			<div class="wrapper">
					<ul class="jump-to-border">
						<li id="overview" class="selected" rel="link">Overview</li>
						<li id="room-choices" rel="link">Room choices</li>
						<li>Map</li>
						<li>Reviews</li>
						<li id="location" rel="link">What's around</li>
						<li id="property-information" rel="link">Property information</li>
						<li id="small-print" rel="link">Small print</li>
						<li class="price"><span class="lowest-price">Lowest price: £141</span> <button>Reserve</button></li>
					</ul>
			</div>
		</div>

		<!--<div class="secret-price" style="background-color:#FAEDFC; ">
			<div class="wrapper" >
				<div class="inner" style="text-align:center; padding:8px; color:#7B1FA2; font-weight:bold;">
					Secret price available
					<button style="background-color:#fff; padding:8px 16px; margin:0; color:#156BC1;">Unlock now</button>
				</div>

			</div>
		</div>-->
<style type="text/css">
	ul.tools {overflow: hidden;}
	ul.tools li {float:left; margin-right:24px; font-size:14px;}
</style>
			<div id="overview-section" class="wrapper pdp-body" style="margin-bottom:100px;">
				<div class="summary-price" style="overflow:hidden; margin-bottom:16px;">
					<div class="summary" style="float:left; width:67%">
							<h1 class="property-name"></h1>
							<div class="address" style="color:#6e6e6e"></div>
							<div class="tagline"></div>
							<ul class="freebies"></ul>
							<ul class="tools">
								<li>Email</li>
								<li>Share link</li>
								<li>Add</li>
							</ul>
					</div>
					<div id="featured-price" style="float:left; width:33%; text-align:right;">
						<div class="current-price"></div>
						<div class="price-info" style="font-size:14px; margin-bottom:4px;"></div>
						<div class="price-summary" style="font-size:12px; margin-bottom:4px;"></div>
						<button type="button" name="button">Reserve</button>
					</div>
				</div>

				<div id="" class="" style="overflow:hidden;">
					<div class="" style="float:left; width:67%">
						<div class="gallery" style="">
							<img src="https://exp.cdn-hotels.com/hotels/6000000/5460000/5459200/5459142/eafa3178_z.jpg?impolicy=fcrop&w=773&h=530&q=high" alt="" style="width:100%; border-radius:4px;">
						</div>

						<div class="thumbnails" style="margin-bottom:16px;">
							<div class="block" style="height:80px; margin-bottom:4px;">
								Thumbnails strip 1
							</div>
							<div class="block" style="height:80px;">
								Thumbnails strip 2
							</div>
						</div>


					</div>
					<div style="float:left; width:33%; box-sizing:border-box; padding-left:16px;">
						<div class="flexible-dates" style="border:solid 1px #e6e6e6;padding:12px; border-radius:4px; margin-bottom:16px;">
							<div class="">
								Flexible?
							</div>
							<span>Compare dates and prices</span>
						</div>
						<div class="map-widget block" style="height:120px; background-color:#e6e6e6; margin-bottom:16px;">
							Check location
						</div>
						<div class="review-widget" style="border:solid 1px #e6e6e6; border-radius:4px; margin-bottom:16px;">
							<div class="review" style="padding:16px; border-bottom:solid 1px #e6e6e6;">
								<div class="review-score" style="display:inline-block; font-weight: bold; background-color:#EFEBE9; padding:8px; border-radius:4px; font-size:20px; vertical-align:top; margin-right:8px;"></div>
								<div class="" style="display:inline-block; vertical-align:top;">
									<div class="superlative" style="font-weight:bold; margin-bottom:4px;"></div>
									<div class="review-count" style="font-size:12px;"></div>
								</div>

							</div>
							<div class="trust-you" style="height:200px;">

							</div>
						</div>

					</div>
				</div>

				<div style="">
						<div class="">
							<div style="overflow:hidden; margin-bottom:16px;">
								<div class="rewards" style="background-color:#faedfc; float:left; width:67%; box-sizing:border-box; padding:16px;">
									<div class="" style="margin-bottom:8px; font-weight:bold;">
										Hotels.com Rewards
									</div>
									<div class="">
										You’ll collect 1 night with this stay <br />
										Remember, collect 10 nights, get 1 reward* night
									</div>
								</div>

								<div class="" style="float:left; width:33%">
									<div style="margin-left:16px; background-color:#ddd; height:90px;">Meso</div>
								</div>

							</div>
							<div class="property-messages block">
								This property is closed from 20 March 2020 to 31 May 2020 (dates subject to change).
							</div>

							<style media="screen">
								.popular-amenities {padding:16px; border-bottom:solid 1px #e6e6e6;}
								.popular-amenities ul {overflow:hidden;}
								.popular-amenities ul li {float:left; margin-right:16px;}
							</style>
							<div class="popular-amenities">
								<ul>
								</ul>
							</div>
							<style media="screen">
								.main-amenities {overflow:hidden;}
								.main-amenities > div {float:left; width:33%;}
								.main-amenities ul li {font-size:14px; margin-bottom:4px;}
							</style>
							<div class="main-amenities" style="">
								<div class="amenities">
									<h3>Main amenities</h3>
									<ul></ul>
								</div>
								<div class="family">
									<h3>For families</h3>
									<ul></ul>
								</div>
								<div class="around">
									<h3>What's around</h3>
									<ul></ul>
								</div>
							</div>

						</div>

				</div>

				<div id="room-choices-section" class="block" style="height:600px; margin-top:20px">
					Room choices
				</div>

				<div id="location-section" class="block" style="height:400px; margin-top:20px">
					Location
				</div>

				<div id="property-information-section" class="block" style="height:1000px; margin-top:20px">
					At a glance<br />
					In the property / room<br />
					Special features<br />
				</div>

				<div id="small-print-section" class="block" style="height:400px; margin-top:20px">
					Samll print
				</div>

				<div id="footer" style="height:500px"></div>

			</div>


  </body>
	<script type="text/javascript">


	window.onscroll = function() {
		pinNavigation()
		addPriceToPinnedNav();
		highlightLinkInPinnedNav();
	};

	var header = document.getElementById("jump-to");
	var sticky = header.offsetTop;

	var price = document.getElementById("featured-price");
	var priceHeight = price.offsetHeight;
	var whenShowPrice = price.offsetTop + price.offsetHeight;

	var roomSection = document.getElementById("room-choices-section");
	var posRoomSection = roomSection.offsetTop + 550;
	var heightRoomSection = roomSection.offsetHeight;

	var locationSection = document.getElementById("location-section");
	var posLocationSection = locationSection.offsetTop + 550;

	var propertyInformationSection = document.getElementById("property-information-section");
	var posPropertyInformationSection = propertyInformationSection.offsetTop + 550;

	var smallPrintSection = document.getElementById("small-print-section");
	var posSmallPrintSection = smallPrintSection.offsetTop + 550;

	function pinNavigation() {
		if (window.pageYOffset > sticky) {
			header.classList.add("sticky");
			header.classList.add("jump-to-border");
			$("#jump-to ul").removeClass("jump-to-border");
			$(".summary-price").addClass("extra-height");
			//console.log("show price in nav bar");
		} else {
			header.classList.remove("sticky");
			header.classList.remove("jump-to-border");
			$("#jump-to ul").addClass("jump-to-border");
			$(".summary-price").removeClass("extra-height")
		}
	}

	function addPriceToPinnedNav() {
		if (window.pageYOffset > whenShowPrice) {
			//console.log("show price in nav bar");
			$("li.price").fadeIn(400);

		} else {
			//console.log("remove price from nav bar");
			$("li.price").hide();
		}
	}

	function highlightLinkInPinnedNav() {
		//console.log(posRoomSection);
		if (window.pageYOffset > posSmallPrintSection){
			console.log("in small print selection");
			$("#jump-to li").removeClass("selected");
			$("#jump-to li#small-print").addClass("selected");
		} else if (window.pageYOffset > posPropertyInformationSection) {
			console.log("in property info selection");
			$("#jump-to li").removeClass("selected");
			$("#jump-to li#property-information").addClass("selected");
		} else if (window.pageYOffset > posLocationSection) {
				console.log("in location")
				$("#jump-to li").removeClass("selected");
				$("#jump-to li#location").addClass("selected");
		} else if (window.pageYOffset > posRoomSection){
				console.log("in room selection")
				$("#jump-to li").removeClass("selected");
				$("#jump-to li#room-choices").addClass("selected");
		} else {
			$("#jump-to li").removeClass("selected");
			$("#jump-to li#overview").addClass("selected");
		}
	}

	var pdpData = "pdp.json"

	$(function(){
		$.getJSON( pdpData, function(json){
			//console.log(json.data.body);
			var propertyDescription = json.data.body.propertyDescription;
			var featuredPrice = json.data.body.featuredPrice;
			var guestReviewData = json.data.body.guestReviews;
			var amenityOverviewData = json.data.body.overview;

			buildPropertyDescription(propertyDescription);
			buildFeaturedPrice(featuredPrice);
			buildGuestReviewWidget(guestReviewData)
			buildAmenityOverview(amenityOverviewData);

			$("#jump-to li[rel='link']").on("click", function(e){
				e.preventDefault();
				var elem = $(this).attr("id");
				console.log($("#" + elem + "-section").offset().top)
				$('html, body').animate({
           scrollTop: $("#" + elem + "-section").offset().top - 50
        }, 500);
			})

		});


	});

	var buildPropertyDescription = function(data){
		//console.log(data)
		$("h1").text(data.name)
		$(".address").text(data.address.streetAddress + ", " + data.address.locality + ", " + data.address.region + ", " + data.address.postalCode  + ", " + data.address.countryName)

		var tagLine = data.tagline[0].replace(/(<([^>]+)>)/ig,"");
		$(".tagline").text(tagLine)

		$.each(data.freebies, function(index, value) {
  		console.log(data.freebies[index])
			$("ul.freebies").append("<li>" + data.freebies[index] + "</li>")
		});
		//console.log(data.optimizedHotelImageContent.hotelImages[0].availableSizes.pdpMainCarouselDesktop)
		//$(".gallery img").attr("src", data.optimizedHotelImageContent.hotelImages[0].availableSizes.pdpMainCarouselDesktop);

		//$(".map-widget img").attr("src", data.mapWidget.staticMapUrl)


	};

	var buildFeaturedPrice = function(data){
		$(".current-price").text(data.currentPrice.formatted);
		$(".price-info").text(data.priceInfo);
		$(".price-summary").text(data.priceSummary);
	}

	var buildGuestReviewWidget = function(data){
		$(".review-score").text(data.brands.rating);
		$(".superlative").text(data.brands.badgeText);
		$(".review-count").text(data.brands.total + " Hotels.com guest reviews");
	}

	var buildAmenityOverview = function(data){
		//console.log(data.overviewSections);
		$.each(data.popularAmenities, function(index, value) {
			//console.log(data.popularAmenities[index])
			$(".popular-amenities ul").append("<li>" + data.popularAmenities[index].info + "</li>")
		});

		$.each(data.overviewSections[0].content, function(index, value) {
			//console.log(data.overviewSections[0].content[index])
			$(".amenities ul").append("<li>" + data.overviewSections[0].content[index] + "</li>")
			//$(".popular-amenities ul").append("<li>" + data.popularAmenities[index].info + "</li>")
		});

		$.each(data.overviewSections[1].content, function(index, value) {
			//console.log(data.overviewSections[1].content[index])
			$(".family ul").append("<li>" + data.overviewSections[1].content[index] + "</li>")
			//$(".popular-amenities ul").append("<li>" + data.popularAmenities[index].info + "</li>")
		});

		$.each(data.overviewSections[2].content, function(index, value) {
			//console.log(data.overviewSections[2].content[index])
			$(".around ul").append("<li>" + data.overviewSections[2].content[index] + "</li>")
			//$(".popular-amenities ul").append("<li>" + data.popularAmenities[index].info + "</li>")
		});

	}

	</script>
</html>
